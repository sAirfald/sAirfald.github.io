<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Task_04</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        .wraper {
            position: relative;
            display: inline-block;
            border: 1px solid #000;
        }

        .box {
            width: 600px;
            margin: 0 auto;
        }

        #table {
            border-collapse: collapse;
        }

        td {
            width: 50px;
            height: 50px;
        }

        .little-block {
            position: absolute;
            left: 256px;
            top: 256px;
            width: 50px;
            height: 50px;
        }

        .little-block .head {
            width: 100%;
            height: 20%;
            background-color: blue;
            transform: rotate()
        }

        .little-block .body {
            width: 100%;
            height: 80%;
            background-color: red;
        }
    </style>
    <script>
        window.onload = function () {
            var aBtn = document.getElementsByTagName('button');
            var oBlock = document.getElementsByClassName('little-block')[0];
            var deg = 0;
            var flag = 1;

            function turnLeft() {
                if (parseInt(getStyle(oBlock, 'left')) > 1) {
                    oBlock.style.left = parseInt(getStyle(oBlock, 'left')) - 51 + 'px';
                }
            }

            function turnRight() {
                if (parseInt(getStyle(oBlock, 'left')) < 458)
                    oBlock.style.left = parseInt(getStyle(oBlock, 'left')) + 51 + 'px';
            }

            function turnTop() {
                console.log(parseInt(getStyle(oBlock, 'top')));
                if (parseInt(getStyle(oBlock, 'top')) > 1) {
                    oBlock.style.top = parseInt(getStyle(oBlock, 'top')) - 51 + 'px';
                }
            }

            function turnDown() {
                if (parseInt(getStyle(oBlock, 'top')) < 458) {
                    oBlock.style.top = parseInt(getStyle(oBlock, 'top')) + 51 + 'px';
                }
            }

            function doMove(flag) {
                console.log('flag == ' + flag);
                switch (flag) {
                    case 1:
                        turnTop();
                        break;
                    case 2:
                        turnRight();
                        break;
                    case 3:
                        turnDown();
                        break;
                    case 4:
                        turnLeft();
                        break;
                }
            }

            aBtn[0].onclick = function () {
                doMove(flag);
            };

            aBtn[1].onclick = function () {
                switch (flag) {
                    case 1:
                        flag = 4;
                        break;
                    case 2:
                    case 3:
                    case 4:
                        flag = flag - 1;
                        break;
                }
                // doMove(flag);
                deg = deg - 90;
                oBlock.style.transform = 'rotate(' + deg + 'deg)';
            }

            aBtn[2].onclick = function () {
                switch (flag) {
                    case 1:
                    case 2:
                    case 3:
                        flag = flag + 1;
                        break;
                    case 4:
                        flag = 1;
                        break;
                }
                // doMove(flag);
                deg = deg + 90;
                oBlock.style.transform = 'rotate(' + deg + 'deg)';
            }

            aBtn[3].onclick = function () {
                switch (flag) {
                    case 1:
                        flag = 3;
                        break;
                    case 2:
                        flag = 4;
                        break;
                    case 3:
                        flag = 1;
                        break;
                    case 4:
                        flag = 2;
                        break;
                }
                deg = deg + 180;
                oBlock.style.transform = 'rotate(' + deg + 'deg)';
                doMove(flag);
            };

            function getStyle(obj, attr) {
                if (obj.currentStyle) {
                    return obj.currentStyle[attr];
                } else {
                    return getComputedStyle(obj, false)[attr];
                }
            }


        };
    </script>
</head>

<body>
    <div class="box">
        <div class="wraper">
            <table id="table" border="1">
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </table>
            <div class="little-block">
                <div class="head"></div>
                <div class="body"></div>
            </div>
        </div>
        <div class="button">
            <button>Go</button>
            <button>TUN LEF</button>
            <button>TUN RIG</button>
            <button>TUN BAC</button>
        </div>
    </div>
</body>

</html>